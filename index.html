<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>By IVS · Plantillas y Guías</title>
  <meta name="description" content="Descarga plantillas y guías gratuitas By IVS." />
  <link rel="icon" href="assets/logo.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --bg: #f5f1ec;        /* beige */
      --brand: #9aa8ea;     /* lavanda-azul */
      --brand-600: #8897e6; /* hover */
      --text: #1f2937;      /* gris oscuro */
    }
    body { background: var(--bg); color: var(--text); }
  </style>
</head>
<body>
  <!-- Header con fondo beige -->
  
  <div class="h-16"></div>
<header class="fixed top-0 inset-x-0 z-50 border-b border-gray-200" style="background: var(--bg);">
  <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href="/" class="flex items-center gap-3">
      <img src="assets/logo.png" alt="By IVS" class="h-8 w-auto" onerror="this.style.display='none'">
      <!-- Eliminado el texto By IVS -->
    </a>
    <nav class="flex items-center gap-4 text-sm">
      <a href="#recursos" class="hover:underline">Recursos</a>
      <a href="#contacto" class="hover:underline">Contacto</a>
    </nav>
  </div>
</header>
  <!-- Hero sin overlay oscuro y con tu portada -->
  <section class="relative w-full overflow-hidden">
    <!-- Cambia a tu archivo. Si lo renombraste, deja src='assets/portada.png' -->
    <img src="assets/portada" alt="Portada By IVS"
         class="absolute inset-0 w-full h-full object-cover max-h-[70vh]"
         onerror="this.src='assets/INES VIDAL Portada'">
    <!-- Eliminamos la capa negra: NO hay overlay -->
    <div class="relative z-10 max-w-5xl mx-auto px-4 py-16 md:py-24 text-white">
      <!-- Para asegurar contraste sobre tu foto, añadimos una sombra suave al texto -->
      <h1 class="text-4xl md:text-6xl font-extrabold leading-tight"
          style="text-shadow: 0 2px 16px rgba(0,0,0,0.35);">
        Plantillas y guías para impulsar tus proyectos
      </h1>
      <p class="mt-4 text-lg md:text-xl max-w-2xl"
         style="color: rgba(255,255,255,0.95); text-shadow: 0 2px 12px rgba(0,0,0,0.35);">
         Recursos prácticos y descargables — BY IVS.
      </p>
      <div class="mt-8 flex flex-wrap gap-3">
        <a href="#recursos" class="px-5 py-3 rounded text-white font-medium shadow"
           style="background: var(--brand);" onmouseover="this.style.background='var(--brand-600)'" onmouseout="this.style.background='var(--brand)'">
          Ver recursos
        </a>
      </div>
    </div>
    <div class="h-10"></div>
  </section>

  <!-- Recursos -->
  <main id="recursos" class="max-w-7xl mx-auto px-4 py-12">
    <div class="mb-6 flex flex-col md:flex-row md:items-end md:justify-between gap-4">
      <div>
        <h2 class="text-2xl md:text-3xl font-bold">Recursos</h2>
        <p class="text-sm">Filtra por categoría o busca por nombre/etiquetas.</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3 w-full md:w-auto">
        <input id="searchInput" type="text" placeholder="Buscar..." class="px-3 py-2 border rounded focus:outline-none focus:ring-2"
               style="--tw-ring-color: var(--brand)">
        <select id="categorySelect" class="px-3 py-2 border rounded focus:outline-none focus:ring-2" style="--tw-ring-color: var(--brand)">
          <option value="">Todas las categorías</option>
        </select>
        <select id="sortSelect" class="px-3 py-2 border rounded focus:outline-none focus:ring-2" style="--tw-ring-color: var(--brand)">
          <option value="newest">Más recientes</option>
          <option value="popular">Más descargadas</option>
          <option value="az">A-Z</option>
        </select>
      </div>
    </div>
    <div id="cards" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </main>

  <!-- Contacto -->
  <section id="contacto" class="bg-white/70 border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 py-12">
      <h3 class="text-xl font-semibold mb-2">¿Sugerencias o nuevas plantillas?</h3>
      <p>Escríbeme: inesvidal.ugc@gmail.com</p>
    </div>
  </section>

  <footer class="bg-white/60 border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 py-6 text-sm">
      © <span id="year"></span> BY IVS.
    </div>
  </footer>

  <script>
    const state = { all: [], filtered: [] };

    async function loadData() {
      try {
        const res = await fetch('data/resources.json', { cache: 'no-store' });
        const data = await res.json();
        state.all = data.resources || [];
        renderCategories();
        applyFilters();
      } catch {
        document.getElementById('cards').innerHTML = '<p>No se pudo cargar data/resources.json.</p>';
      }
    }

    function renderCategories() {
      const select = document.getElementById('categorySelect');
      const cats = Array.from(new Set(state.all.map(r => r.category))).filter(Boolean).sort();
      cats.forEach(c => {
        const opt = document.createElement('option');
        opt.value = c; opt.textContent = c;
        select.appendChild(opt);
      });
    }

    function applyFilters() {
      const q = document.getElementById('searchInput').value.toLowerCase().trim();
      const cat = document.getElementById('categorySelect').value;
      const sort = document.getElementById('sortSelect').value;

      let list = state.all.filter(r => {
        const haystack = [r.title, r.description, ...(r.tags || [])].join(' ').toLowerCase();
        const okQ = !q || haystack.includes(q);
        const okC = !cat || r.category === cat;
        return okQ && okC;
      });

      if (sort === 'newest') list.sort((a,b) => new Date(b.publishedAt) - new Date(a.publishedAt));
      if (sort === 'popular') list.sort((a,b) => (b.downloads||0) - (a.downloads||0));
      if (sort === 'az') list.sort((a,b) => a.title.localeCompare(b.title));

      state.filtered = list;
      renderCards();
    }

    function renderCards() {
      const wrap = document.getElementById('cards');
      wrap.innerHTML = '';
      state.filtered.forEach(r => {
        const card = document.createElement('article');
        card.className = 'bg-white border rounded-xl p-5 flex flex-col shadow-sm hover:shadow transition';
        card.innerHTML = `
          <div class="flex items-start justify-between gap-3 mb-2">
            <h4 class="text-lg font-semibold">${r.title}</h4>
            ${r.format ? `<span class="px-2 py-0.5 text-xs rounded" style="background:#eef2ff;color:#4f46e5">${r.format}</span>` : ''}
          </div>
          <p class="text-sm mb-3">${r.description || ''}</p>
          <div class="text-xs text-gray-600 mb-3">
            <span class="mr-2">${r.category || 'General'}</span>
            ${r.size ? `<span class="mr-2">· ${r.size}</span>` : ''}
          </div>
          <div class="flex flex-wrap gap-2 mb-4">
            ${(r.tags||[]).map(t=>`<span class="px-2 py-1 rounded text-xs" style="background:#f1f5f9">${t}</span>`).join('')}
          </div>
          <a href="${r.url}" download class="mt-auto inline-flex items-center justify-center px-3 py-2 text-white rounded"
             style="background: var(--brand);" onmouseover="this.style.background='var(--brand-600)'" onmouseout="this.style.background='var(--brand)'">
             Descargar
          </a>
        `;
        wrap.appendChild(card);
      });
      if (!state.filtered.length) {
        wrap.innerHTML = '<p>No hay recursos todavía.</p>';
      }
    }

    document.getElementById('year').textContent = new Date().getFullYear();
    ['searchInput','categorySelect','sortSelect'].forEach(id=>{
      const el = document.getElementById(id);
      el.addEventListener('input', applyFilters);
      el.addEventListener('change', applyFilters);
    });
    loadData();
  </script>
</body>
</html>
